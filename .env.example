# ===================================
# STRIPE PAYMENTS CONFIGURATION
# ===================================

# Backend Environment Variables
# Copy these to backend/.env

# Flask Configuration
FLASK_ENV=development
FLASK_SECRET_KEY=your-secret-key-change-in-production

# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# Stripe Configuration (Required for payments)
STRIPE_SECRET_KEY=sk_test_... # Get from Stripe Dashboard > API Keys
STRIPE_WEBHOOK_SECRET=whsec_... # Get after setting up webhook endpoint

# Stripe Price IDs - Monthly (Create these in Stripe Dashboard > Products)
STRIPE_SUPPORTED_MONTHLY_PRICE_ID=price_... # $39.99/month subscription
STRIPE_ACADEMY_MONTHLY_PRICE_ID=price_... # $499.99/month subscription

# Stripe Price IDs - Yearly (17% discount)
STRIPE_SUPPORTED_YEARLY_PRICE_ID=price_... # $399.99/year subscription (save ~$80)
STRIPE_ACADEMY_YEARLY_PRICE_ID=price_... # $4999.99/year subscription (save ~$1000)

# Legacy support (optional - for backwards compatibility)
STRIPE_SUPPORTED_PRICE_ID=${STRIPE_SUPPORTED_MONTHLY_PRICE_ID}
STRIPE_ACADEMY_PRICE_ID=${STRIPE_ACADEMY_MONTHLY_PRICE_ID}

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:5173

# Optional Services
OPENAI_API_KEY=your-openai-key # For AI features
GEMINI_API_KEY=your-gemini-key # For AI features

# ===================================

# Frontend Environment Variables
# Copy these to frontend/.env

VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
VITE_API_URL=http://localhost:5000/api
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_... # Get from Stripe Dashboard > API Keys

# ===================================
# STRIPE SETUP INSTRUCTIONS
# ===================================

# 1. Create a Stripe Account
#    - Go to https://stripe.com and sign up
#    - Complete your account setup

# 2. Get API Keys (Test Mode)
#    - Go to Stripe Dashboard > Developers > API Keys
#    - Copy the "Publishable key" (starts with pk_test_)
#    - Copy the "Secret key" (starts with sk_test_)

# 3. Create Products and Prices
#    - Go to Stripe Dashboard > Products
#    - Click "Add product"
#    
#    For Supported Tier:
#    Monthly:
#    - Name: "Supported Subscription - Monthly"
#    - Pricing: $39.99 / month, Recurring
#    - Copy the price ID (starts with price_)
#    
#    Yearly (click "Add another price" on same product):
#    - Name: "Supported Subscription - Yearly"
#    - Pricing: $399.99 / year, Recurring
#    - Copy the price ID (starts with price_)
#    
#    For Academy Tier:
#    Monthly:
#    - Name: "Academy Subscription - Monthly"
#    - Pricing: $499.99 / month, Recurring
#    - Copy the price ID (starts with price_)
#    
#    Yearly (click "Add another price" on same product):
#    - Name: "Academy Subscription - Yearly"
#    - Pricing: $4999.99 / year, Recurring
#    - Copy the price ID (starts with price_)

# 4. Set Up Webhook Endpoint
#    - Go to Stripe Dashboard > Developers > Webhooks
#    - Click "Add endpoint"
#    - Endpoint URL: https://your-backend-domain.com/api/subscriptions/webhook
#    - Select events:
#      * checkout.session.completed
#      * customer.subscription.updated
#      * customer.subscription.deleted
#      * invoice.payment_succeeded
#      * invoice.payment_failed
#    - Copy the "Signing secret" (starts with whsec_)

# 5. Configure Customer Portal (Optional)
#    - Go to Stripe Dashboard > Settings > Billing > Customer portal
#    - Enable the portal
#    - Configure branding and features
#    - Save changes

# 6. Test Your Integration
#    - Use test card numbers from: https://stripe.com/docs/testing
#    - Common test cards:
#      * Success: 4242 4242 4242 4242
#      * Decline: 4000 0000 0000 0002
#      * Requires authentication: 4000 0025 0000 3155

# 7. Going Live
#    - Switch to live API keys (start with pk_live_ and sk_live_)
#    - Create live products and prices
#    - Update webhook endpoint with live URL
#    - Test with a real card (small amount)

# ===================================
# ENVIRONMENT-SPECIFIC NOTES
# ===================================

# Development:
# - Use test API keys
# - Webhook testing: Use Stripe CLI for local testing
#   stripe listen --forward-to localhost:5000/api/subscriptions/webhook

# Production:
# - Use live API keys
# - Ensure HTTPS for webhook endpoint
# - Set up monitoring for failed payments
# - Configure email notifications