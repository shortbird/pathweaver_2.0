# ===================================
# OPTIO PLATFORM - ENVIRONMENT VARIABLES
# ===================================
# Complete environment variable reference
# See docs/ENVIRONMENT_VARIABLES.md for detailed documentation

# ===================================
# REQUIRED - BACKEND CONFIGURATION
# ===================================

# Flask Configuration
FLASK_ENV=development  # Use 'production' for production environment
FLASK_SECRET_KEY=your-64-character-secret-key-change-in-production-xxxxxxxxx  # MUST be exactly 64 characters in production

# Supabase Database Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-here  # Safe to expose in frontend
SUPABASE_SERVICE_KEY=your-supabase-service-key-here  # KEEP SECRET - backend only

# CORS Configuration
FRONTEND_URL=http://localhost:5173  # Primary frontend URL
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000  # Comma-separated list

# ===================================
# REQUIRED - FRONTEND CONFIGURATION
# ===================================

# Frontend API Configuration
VITE_API_URL=http://localhost:5000  # Backend API URL (without /api suffix)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# ===================================
# OPTIONAL - AI FEATURES
# ===================================

# Gemini API (AI Tutor)
GEMINI_API_KEY=your-gemini-api-key-here  # Get from https://makersuite.google.com/app/apikey
GEMINI_MODEL=gemini-2.5-flash-lite  # Recommended model (always use this)

# Image Generation (Quest & Badge Images)
PEXELS_API_KEY=your-pexels-api-key-here  # Get from https://www.pexels.com/api/

# ===================================
# OPTIONAL - LMS INTEGRATION
# ===================================

# Canvas LMS
CANVAS_CLIENT_ID=your-canvas-client-id-here
CANVAS_PLATFORM_URL=https://canvas.instructure.com  # Your institution's Canvas URL

# Google Classroom
GOOGLE_CLIENT_ID=your-google-oauth-client-id-here
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret-here  # KEEP SECRET

# Schoology
SCHOOLOGY_CLIENT_ID=your-schoology-client-id-here
SCHOOLOGY_CLIENT_SECRET=your-schoology-client-secret-here  # KEEP SECRET

# Moodle
MOODLE_URL=https://moodle.yourinstitution.edu
MOODLE_CLIENT_ID=your-moodle-client-id-here

# LMS Feature Flags
ENABLE_LMS_SYNC=true  # Enable roster synchronization
ENABLE_GRADE_PASSBACK=true  # Enable grade passback to LMS

# ===================================
# OPTIONAL - STRIPE PAYMENTS (LEGACY)
# ===================================
# Note: Subscription management is now database-driven
# These variables are for legacy Stripe integration only

STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key-here
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key-here

# ===================================
# OPTIONAL - MONITORING & LOGGING
# ===================================

LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# ===================================
# ENVIRONMENT-SPECIFIC EXAMPLES
# ===================================

# DEVELOPMENT ENVIRONMENT:
# FLASK_ENV=development
# FLASK_SECRET_KEY=dev-secret-key-64-characters-long-xxxxxxxxxxxxxxxxxxxxxxxxx
# FRONTEND_URL=https://optio-dev-frontend.onrender.com
# ALLOWED_ORIGINS=https://optio-dev-frontend.onrender.com,http://localhost:5173
# VITE_API_URL=https://optio-dev-backend.onrender.com

# PRODUCTION ENVIRONMENT:
# FLASK_ENV=production
# FLASK_SECRET_KEY=prod-secret-key-64-characters-long-CHANGE-THIS-xxxxxxxxxx
# FRONTEND_URL=https://www.optioeducation.com
# ALLOWED_ORIGINS=https://www.optioeducation.com,https://optioeducation.com
# VITE_API_URL=https://optio-prod-backend.onrender.com

# ===================================
# SETUP INSTRUCTIONS
# ===================================

# 1. Generate Secure FLASK_SECRET_KEY (64 characters):
#    python -c "import secrets; print(secrets.token_hex(32))"

# 2. Get Supabase Credentials:
#    - Go to Supabase Dashboard > Project Settings > API
#    - Copy Project URL, anon key, and service_role key

# 3. Configure CORS:
#    - Development: Include localhost and dev frontend URL
#    - Production: Only include production domains

# 4. Optional - AI Features:
#    - Gemini API: https://makersuite.google.com/app/apikey
#    - Pexels API: https://www.pexels.com/api/

# 5. Optional - LMS Integration:
#    - See docs/LMS_INTEGRATION.md for platform-specific setup
#    - Configure OAuth credentials for each platform
#    - Set up LTI 1.3 for Canvas and Moodle

# 6. Deployment:
#    - Copy this file to backend/.env (backend only)
#    - Set frontend variables in Render dashboard
#    - Never commit .env files to git

# ===================================
# SECURITY BEST PRACTICES
# ===================================

# - Never commit .env files to version control
# - Use different FLASK_SECRET_KEY for dev and prod
# - Rotate secrets regularly
# - Keep SUPABASE_SERVICE_KEY secret (backend only)
# - Use HTTPS in production ALLOWED_ORIGINS
# - Remove localhost from production ALLOWED_ORIGINS

# ===================================
# TROUBLESHOOTING
# ===================================

# Common Issues:
# 1. "FLASK_SECRET_KEY must be set to a secure value"
#    → Generate 64-character key with command above

# 2. "CORS policy: No 'Access-Control-Allow-Origin' header"
#    → Check ALLOWED_ORIGINS includes requesting domain
#    → Verify VITE_API_URL does NOT include /api suffix

# 3. "Invalid or expired refresh token"
#    → Ensure FLASK_SECRET_KEY is 64 characters
#    → Verify key is identical across all backend instances

# For detailed documentation, see: docs/ENVIRONMENT_VARIABLES.md
